<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NOT.ESP QUIZ — PWA</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#141625" />
  <link rel="stylesheet" href="style.css" />
  <script defer src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => navigator.serviceWorker.register('./service-worker.js'));
    }
  </script>
</head>
<body>
  <div class="app">
    <header>
      <div class="title">NOT.ESP QUIZ</div>
      <div class="spacer"></div>
      <button id="settingsBtn" class="iconbtn" title="Edit Words" aria-label="Edit Words">⚙️</button>
      <div class="scorebar">
        <div class="chip">✅ <b id="ok">0</b></div>
        <div class="chip">❌ <b id="ko">0</b></div>
        <div class="chip">📊 Acc <b id="acc">0%</b></div>
        <div class="chip">🔥 Streak <b id="streak">0</b></div>
      </div>
    </header>

    <section class="card">
      <nav class="tabs" role="tablist">
        <button class="tab" data-mode="0" role="tab" aria-selected="false">Emoji → Word (Type)</button>
        <button class="tab" data-mode="1" role="tab" aria-selected="false">Word → Emoji (Icons)</button>
        <button class="tab" data-mode="2" role="tab" aria-selected="false">Emoji → Word (Words)</button>
      </nav>

      <div class="mode" id="modeLabel">Mode</div>
      <div class="prompt" id="prompt">🙂</div>

      <div class="mc-region">
        <div class="overlay hidden" id="overlay">
          <div class="overlay-box">
            <h3 id="overlayTitle">Type your guess (word), then reveal</h3>
            <div class="overlay-row" id="preGuessRow">
              <input id="preGuessInput" type="text" placeholder="Your guess..." autocomplete="off" autocapitalize="none" autocorrect="off" spellcheck="false" enterkeyhint="done" />
              <button id="revealBtn" class="btn primary">Reveal</button>
            </div>
            <div class="overlay-hint" id="overlayHint">Press Enter to reveal</div>
          </div>
        </div>

        <div id="resultBanner" class="result-banner" role="status" aria-live="polite"></div>
        <div id="choices" class="choices"></div>
      </div>
    </section>
  </div>

  <!-- Editor Modal -->
  <div id="editorModal" class="editor hidden" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="editor-panel">
      <div class="editor-head">
        <h2>Edit Icon–Word Pairs</h2>
        <div class="spacer"></div>
        <input id="editorSearch" class="editor-search" type="text" placeholder="Search…" />
        <button id="editorClose" class="btn ghost">Close</button>
      </div>
      <div class="editor-toolbar">
        <button id="editorAdd" class="btn primary">Add Pair</button>
        <button id="editorSave" class="btn">Save & Apply</button>
        <button id="editorExport" class="btn">Export JSON</button>
        <input type="file" id="editorImportFile" accept="application/json" hidden />
        <button id="editorImport" class="btn">Import JSON</button>
        <button id="editorReset" class="btn danger">Reset to Defaults</button>
      </div>
      <div id="editorList" class="editor-list"></div>
      <div class="editor-foot">Changes persist in your browser. Export for backup.</div>
    </div>
  </div>

  <!-- Emoji Picker Modal -->
  <div id="emojiPicker" class="picker hidden" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="picker-panel">
      <div class="picker-head">
        <h3>Select an icon</h3>
        <div class="spacer"></div>
        <button id="pickerClose" class="btn ghost">Close</button>
      </div>
      <div id="pickerGrid" class="picker-grid"></div>
      <div class="picker-foot">Tip: Icons must be unique in your set.</div>
    </div>
  </div>

  <div class="toast" id="toast"></div>
</body>
</html>
